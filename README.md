# Дерево Фенвика

[![CMake](https://github.com/Algorithms-and-Data-Structures-2021/semester-work-template/actions/workflows/cmake.yml/badge.svg)](https://github.com/Algorithms-and-Data-Structures-2021/semester-work-template/actions/workflows/cmake.yml)


Краткое описание семестрового проекта:

- Реализуется структура данных под названием "дерево Фенвика" (двоичное индексирвоанное дерево).Позволяет быстро изменять значения в массиве и находить некоторые функции от элементов массива.

- Интуитивно  можно представить двоичное индексированное дерево как сжатое представление двоичного дерева, которое само по себе является оптимизацией стандартного представления массива.

- Чаще всего используется в олимпиадном программировании.

- Операции над деревом Фенвика : 
   1.Построение дерева
   2.Обновление вершин
   3.Сумма элементов с 0 по i-й
   4.Cумма элементов с l-го по r-й.
   
- Теоретическая сложность операций :
   1.Построение и обновление за O(n log n) времени и O(n) памяти.
   2.Сумма элементов  в худшем случае требует порядка O(log N) времени.
  

## Команда "1Brain43"


| Фамилия Имя      | Вклад (%) | Прозвище              |
| :---             |   ---:    |  ---:                 |
| Ахметова Ляйсан  | 40        |  _человек-код_        |
| Байгулова Эльмира| 40        |  _человек-сыщик_      |
| Насырова Яна     | 20        |  _человек-excel_      |

**Девиз команды**
> Пусть код запутан, но мы не плачем,
> И чем сложнее стоит задача,
> Прорвёмся мы, но не заплачем

## Структура проекта

Проект состоит из следующих частей:

- [`src`](src)/[`include`](include) - реализация дерева Фенвика (исходный код с методами и заголовочные файлы);
- [`benchmark`](benchmark) - контрольные тесты производительности дерева Фенвика (операции конструирования дерева, суммирования элементов от нулевого до i-го,
  суммироавния элементов от i-го до j-го и обновления значения элемента);
- [`examples`](examples) - примеры работы со структурой данных;??????
- [`dataset`](dataset) - наборы данных для запуска контрольных тестов и их генерация;

## Требования (Prerequisites) 

Рекомендуемые требования:

1. С++ компилятор c поддержкой стандарта C++17 (например, _GNU GCC 8.1.x_ и выше).
2. Система автоматизации сборки _CMake_ (версия _3.12.x_ и выше).
3. Интерпретатор _Python_ (версия _3.9.x_).
4. Рекомендуемый объем оперативной памяти - не менее 4 ГБ.
5. Свободное дисковое пространство объемом ~ 3 ГБ (набор данных для контрольных тестов).

## Сборка и запуск

### Пример на Windows

#### Сборка проекта

Склонируйте проект к себе на устройство через [Git for Windows](https://gitforwindows.org/) (либо используйте
возможности IDE):

```shell
git clone https://github.com/Algorithms-and-Data-Structures-2021/semester-work-fenwick-tree.git
```

Для ручной сборки проекта в терминале введите:

```shell
# переход в папку с проектом
cd C:\Users\username\asd-projects\semester-work-fenwick-tree

# создание папки для файлов сборки (чтобы не засорять папку с проектом) 
mkdir -p build && cd build 

# сборка проекта
cmake .. -DCMAKE_BUILD_TYPE=RelWithDebInfo && cmake --config RelWithDebInfo --build . 
```

#### Генерация тестовых данных

Формат хранения тестовых данных в данном проекте - .txt


Генерация тестового набора данных в
формате .txt:

```shell
# переход в папку генерации набора данных
cd dataset
```
#### запуск Python-скрипта
Для запуска генерации тестовых данных перейдте в класс generate_csv_dataset.py и запустите метод main() 
или перейдите по ссылке:

[Google Drive](https://drive.google.com/drive/folders/13HUCf5TdwEJQKBFji4icyDiecBpnk8SL).


Тестовые данные представлены в txt формате (см.
[`dataset/getSum/1/data(100).txt`](dataset/getSum/1/data(100).txt)):

```
48102855 2660615 56359353 26371011 73288238
...
```

Для удобства запуска контрольных тестов данные оргинизованы в директориях, например:

```shell
dataset/
  /constructFenwick/
    1/
      data(100).txt
      ...
      data(5000000).txt
    2/ ...
    3/ ...
    ...
    10/ ...
  getSum/
    1/
      data(100).txt
      ...
      data(5000000).txt
    ...
    10/ ...
  ...
```

По названию директории `/dataset/getSum` можно понять, что здесь хранятся наборы данных для контрольных тестов 
**по подсчету суммы** элементов дерева Фенвика. Названия файлов `data(100).txt`, `data(5000000).txt` и т.д. хранят информацию о размере набора данных (т.е. количество элементов). 

#### Контрольные тесты (benchmarks)

Для запуска контрольных тестов необходимо предварительно сгенерировать или скачать готовый набор тестовых данных.

Наборы данных находятся в папке семестровой
работы на [Google Drive](https://drive.google.com/drive/folders/13HUCf5TdwEJQKBFji4icyDiecBpnk8SL).

##### Список контрольных тестов

| Название                  | Описание                                | Метрики         |
| :---                      | ---                                     | :---            |
| `constructFenwick`        | построение дерева Фенвика по данному массиву   | _время_         |
| `getSum`                  | суммирование элементов дерева Фенвика от i-го до j-го   | _время_ |
| `getSumFromZero`          | суммирование элементов дерева Фенвика от 0-го до i-го   | _время_ |
| `updateFw`                | изменение значения i-го элемента ддерева Фенвика   | _время_      |

##### Примеры запуска

Для запуска контрольных тестов перейдите в класс demo_benchmark.cpp, в поле inputFile пропишите путь к тестовым данным по шаблону, указанному выше. Запустите метод main(). В консоли выведется время в наносекундах.

## Источники

Список источников
1. https://www.youtube.com/watch?v=4SNzC4uNmTA
2. https://www.youtube.com/watch?v=BzFN9YwR-NM
3. https://informatics.msk.ru/mod/book/view.php?id=491&chapterid=193
4. https://neerc.ifmo.ru/wiki/index.php?title=%D0%94%D0%B5%D1%80%D0%B5%D0%B2%D0%BE_%D0%A4%D0%B5%D0%BD%D0%B2%D0%B8%D0%BA%D0%B0
5. https://e-maxx.ru/algo/fenwick_tree
6. https://static.aminer.org/pdf/PDF/001/073/976/a_new_data_structure_for_cumulative_frequency_tables.pdf
7. https://en.wikipedia.org/wiki/Fenwick_tree
